<!DOCTYPE html>
<html lang="de">

    <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>YiM Helfer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/main.css">
</head>


<body>

    <!-- template for the table component -->
    <script type="text/x-template" id="table-template">
        <table class="table">
            <thead class="thead-inverse">
                <tr>
                    <th>#</th>
                    <th>E-Mail</th>
                    <th>Title</th>
                    <th>Essen</span></th>
                    <th>Ü-35</th>
                    <th width="120px"><span class="oi oi-cog" title="icon name" aria-hidden="true"></span></th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="(item, index) in filteredItems" v-bind:class="{ 'table-success': item.regId }">
                    <th scope="row">{{ index + 1 }}</th>
                    <td v-if="item.regId">
                        <strong>{{ item.email }}</strong>
                        <small class="text-success ml-3">{{ item.regId }}, {{ item.firstname }} {{ item.lastname }}, {{ item.age }} Jahre</small>
                    </td>
                    <td v-else>
                        <span v-show="!item.editing">{{ item.email }}</span>
                        <input v-show="item.editing" v-validate="'required|email'" :class="{'form-control': true, 'is-invalid': errors.has('email') }" name="email" type="email"
                            v-model="item.email"
                            v-on:keyup.enter="doneEdit(item)"
                            v-on:keyup.esc="cancelEdit(item)">
                    </td>
                    <td>
                        <span v-show="!item.editing">{{ item.label }}</span>
                        <input v-show="item.editing" class="form-control" type="email"
                            v-model="item.label"
                            v-on:keyup.enter="doneEdit(item)"
                            v-on:keyup.esc="cancelEdit(item)">
                    </td>
                    <td>
                        <div v-show="!item.editing">
                            <span v-if="item.foodPrivilege" class="oi oi-check text-success"></span>
                            <strong v-else class="text-danger">X</strong>
                        </div>
                        <div v-show="item.editing" class="material-switch pull-right">
                            <input :id="prefix+'-food-'+index" type="checkbox" v-model="item.foodPrivilege"/>
                            <label :for="prefix+'-food-'+index" class="bg-success"></label>
                        </div>
                    </td>
                    <td>
                        <div v-show="!item.editing">
                            <span v-if="item.above35" class="oi oi-check text-success"></span>
                            <strong v-else class="text-danger">X</strong>
                        </div>
                        <div v-show="item.editing" class="material-switch pull-right">
                            <input :id="prefix+'-35-'+index" type="checkbox" v-model="item.above35"/>
                            <label :for="prefix+'-35-'+index" class="bg-success"></label>
                        </div>
                    </td>
                    <td v-if="item.regId" class="text-right"><span class="oi oi-check text-success"></span></td>
                    <td v-else>
                        <img v-if="axiosBusy" src="/static/img/giphy.gif" height="38">
                        <span v-else>
                            <button type="button" class="btn btn-primary" v-on:click="editItem(item)" v-show="!item.editing"><span class="oi oi-pencil"></span></button>
                            <button type="button" class="btn btn-primary" v-on:click="doneEdit(item)" v-show="item.editing"><span class="oi oi-check"></span></button>
                            <button type="button" class="btn btn-danger" v-on:click="removeItem(index)"><span class="oi oi-trash"></span></button>
                        </span>
                    </td>
                </tr>
                <tr>
                    <th scope="row">{{ filteredItems.length + 1 }}</th>
                    <td>
                        <input v-validate="'required|email'" :class="{'form-control': true, 'is-invalid': errors.has('email') }" type="email" name="email" class="form-control" placeholder="E-Mail" required v-on:keyup.enter="addItem" v-model="email">
                        <span v-show="errors.has('email')" class="invalid-feedback">{{ errors.first('email') }}</span>
                    </td>
                    <td>
                        <input type="text" name="label" class="form-control" placeholder="Beschreibung" v-on:keyup.enter="addItem" v-model="label">
                    </td>
                    <td>
                        <div class="material-switch pull-right">
                            <input :id="prefix+'-food'" type="checkbox" v-model="foodPrivilege"/>
                            <label :for="prefix+'-food'" class="bg-success"></label>
                        </div>
                    </td>
                    <td>
                        <div class="material-switch pull-right">
                            <input :id="prefix+'-35'" type="checkbox" v-model="above35"/>
                            <label :for="prefix+'-35'" class="bg-success"></label>
                        </div>
                    </td>
                    <td>
                        <img v-if="axiosBusy" src="/static/img/giphy.gif" height="38">
                        <button v-else type="button" class="btn btn-success" v-on:click="addItem"><span class="oi oi-plus"></span></button>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="6">
                        <div v-show="axiosError.length" class="alert alert-danger" role="alert">{{ axiosError }}</div>
                    </td>
                </tr>
            </tfoot>
        </table>
    </script>





    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                YiM-Helfer
            </a>
        </div>
    </nav>


    <main id="app" role="main" class="container py-5">

        <h1>Bereich: {{ area }}</h1>

        <div class="alert alert-info" role="alert">
            <strong>E-Mail:</strong> Eine E-Mail kann für Familien / Kinder mehmals eingetragen werden.
            <br><strong>Beschreibung:</strong> Wird zusammen mit dem Bereich auf dem Lanyard stehen, bsp: <em>Mitarbeiter – {{ area }}</em>
        </div>


        <h2 class="mt-5">Eintritt Frei</h2>
        <helfer-table :items="items" :area="area" label-preset="Mitarbeiter" free-admission="true"></helfer-table>


        <h2 class="mt-5">Zahlt selbst</h2>
        <helfer-table :items="items" :area="area" label-preset="Volunteer" free-admission="false"></helfer-table>



    </main>

    <footer class="bg-dark py-5 text-light text-center">

        <div class="container">
            <ul class="inline-list">
                <li>
                    &copy; 2016 Youth in Misson Congress
                </li>
                <li data-delimiter="&middot ">
                    <a href="/impressum/">Impressum</a>
                </li>
                <li data-delimiter="&middot ">
                    <a href="/datenschutz/">Datenschutzerkl&auml;rung</a>
                </li>
            </ul>
        </div>

    </footer>

    <!-- <script src="/static/js/bundle.js"></script> -->
    <script src="/static/js/lodash.min.js"></script>
    <script src="/static/js/vue.js"></script>
    <script src="/static/js/vee-validate.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="/static/js/vue-app.js"></script>

</body>

</html>
